# SMART-WATER-METER

# THE SMART WATER METER PROJECT

**Date:** 29th Oct 2023

## Introduction

This repository contains the final prototype program for the Smart Water Meter Project. The program is developed using the Arduino IDE with the STM32Duino programming procedure. 
It interfaces with various components to efficiently monitor and manage water consumption.

## Hardware Components

The program interfaces the STM32F103C8T6 microcontroller with the following components:

- Water Flow Sensor
- Motorized Ball Valve via L298N Driver
- HT1621 LCD
- IR Sensor
- GSM SIM7600CE 4G Module

## Working Principle

The program continuously records pulses generated by the water flow sensor using an Interrupt Service Routine. 
It employs the equation Volume = 0.002663 * pulses to calculate the corresponding volume in liters of water passing through the sensor. 
This value was practically measured for accuracy.

The calculated volume is displayed on the HT1621 LCD in real-time as water is being consumed. 
Additionally, the program sends an SMS to the specified phone number (+254796456877) to record the daily water consumption. 
In case the water supplier wants to cut off the supply remotely, an SMS is sent to the meter, which rotates the motorized ball valve to stop the water supply.

The IR sensor helps conserve power by controlling the display on the HT1621. When the cover lid is lifted, the LCD displays data, and when closed, it hibernates.

## Future Improvements

To enhance efficiency, EEPROM storage Will be added to the project once STM32Duino develops an EEPROM I2C protocol for STM32 in Arduino.

## Battery Power Management

The project includes a battery power management system. The HT1621 LCD can monitor the battery's power consumption. The key details are as follows:

- Battery Capacity: 4000 mAh (approximate)
- Total current drawn while the meter is running (Motor not moving and no SMS being sent): Approximately 15mAh
- Estimated Battery Life: 22 Days (accounting for intermittent SMS and motor usage)

## Setting the Battery Markers

The program includes markers to indicate battery status. 
These markers are designed to last approximately 160 hours each, and the total duration can be extended by measuring actual power consumption.

## About the Developer

This program was developed by Eric Mulwa, a BSc Electrical and Electronic Engineering student at Dedan Kimathi University of Tehnology 
Under Center for Development of Electronic Devices (CDED). 

## Author
Eric Mulwa

